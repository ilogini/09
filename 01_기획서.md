# 🐾 펫런 (PetRun) 웹앱 기획서

> 반려동물과 함께하는 산책을 게이미피케이션으로 즐겁게!
> "나이키 런 클럽"처럼 산책을 기록하고, 다른 보호자들과 경쟁하세요.

---

## 1. 프로젝트 개요

### 1.1 배경

- 국내 반려동물 양육 가구 약 600만 (2025년 기준)
- 매일 반복되는 산책을 "게임"으로 전환하여 동기부여
- 반려동물 산책 전용 트래킹 앱의 국내 시장 부재
- Nike Run Club의 검증된 소셜 경쟁 모델을 반려동물 산책에 적용

### 1.2 핵심 컨셉

| 키워드 | 설명 |
|--------|------|
| **Track** | GPS 기반 산책 경로, 거리, 시간 실시간 기록 |
| **Compete** | 주간/월간 랭킹, 챌린지, 배지 시스템 |
| **Connect** | 동네 산책 친구 찾기, 산책 코스 공유 |

### 1.3 타겟 사용자

| 페르소나 | 연령 | 특징 |
|---------|------|------|
| 🐕 열혈 산책러 | 20-30대 | 매일 1시간 이상 산책, 기록 좋아함 |
| 🐾 건강 챙기미 | 30-40대 | 반려동물 건강관리 관심, 데이터 중시 |
| 🏆 경쟁 러버 | 20-30대 | 랭킹, 챌린지에 동기부여되는 유형 |

---

## 2. 수익 모델

### 2.1 광고 수익

| 광고 유형 | 위치 | 예상 단가 |
|----------|------|----------|
| 카카오 AdFit 배너 | 홈 피드 사이사이 | CPM 1,000~3,000원 |
| 네이티브 광고 | 산책 완료 화면 | CPC 100~300원 |
| 리워드 광고 | 포인트 충전 시 | 건당 50~200원 |
| 지도 내 스폰서 핀 | 산책 지도 위 | 월정액 B2B |

### 2.2 프리미엄 구독 (월 3,900원)

| 무료 | 프리미엄 |
|------|---------|
| 기본 산책 기록 | 상세 통계 & 리포트 |
| 주간 랭킹 | 실시간 랭킹 + 지역별 |
| 월 3회 챌린지 | 무제한 챌린지 |
| 광고 노출 | 광고 제거 |
| - | 커스텀 산책 코스 생성 |
| - | 반려동물 건강 리포트 |

### 2.3 인앱 결제

| 아이템 | 가격 | 설명 |
|--------|------|------|
| 프로필 뱃지 팩 | 1,000원 | 특별 뱃지 5종 |
| 산책 테마 | 2,000원 | 지도 테마 변경 |
| 펫 의상 | 500~1,500원 | 프로필 펫 꾸미기 |

### 2.4 결제 연동

```
PG사: 토스페이먼츠 (Toss Payments)
- 카드 결제, 카카오페이, 네이버페이
- Next.js API Routes로 서버사이드 결제 처리
- 정기결제(빌링키) 지원
```

---

## 3. 사이트맵

```
펫런 (PetRun)
│
├── 🏠 홈 (/)
│   ├── 오늘의 산책 요약
│   ├── 진행 중인 챌린지
│   ├── 실시간 랭킹 미리보기
│   └── 동네 산책 피드
│
├── 🗺️ 지도 (/map)
│   ├── 내 주변 산책 코스
│   ├── 반려동물 동반 가능 장소
│   ├── 동물병원/약국 표시
│   └── 다른 사용자 산책 경로
│
├── 🚶 산책 시작 (/walk)
│   ├── 실시간 GPS 트래킹
│   ├── 거리/시간/속도/칼로리
│   ├── 산책 중 사진 촬영
│   ├── 일시정지/재개
│   └── 산책 완료 → 기록 저장
│
├── 🏆 랭킹 (/ranking)
│   ├── 주간 랭킹
│   ├── 월간 랭킹
│   ├── 동네별 랭킹
│   ├── 챌린지 순위
│   └── 명예의 전당
│
├── 👤 마이페이지 (/my)
│   ├── 프로필 (나 + 반려동물)
│   ├── 산책 기록/통계
│   ├── 획득 뱃지
│   ├── 내 산책 코스
│   └── 설정
│
├── 🎯 챌린지 (/challenge)
│   ├── 진행 중인 챌린지
│   ├── 참여 가능 챌린지
│   └── 완료된 챌린지
│
├── 👥 소셜 (/social)
│   ├── 팔로잉/팔로워
│   ├── 동네 산책 친구
│   └── 산책 초대
│
└── ⚙️ 설정 (/settings)
    ├── 알림 설정
    ├── 구독 관리
    ├── 개인정보
    └── 로그아웃
```

**총 페이지 수**: 메인 8개 + 하위 약 20개 = **약 28페이지**

---

## 4. 핵심 기능 정의

### 4.1 산책 트래킹 (MVP 핵심)

| 기능 | 우선순위 | 설명 |
|------|---------|------|
| GPS 실시간 경로 기록 | ✅ 필수 | Web Geolocation API + watchPosition |
| 거리/시간/속도 측정 | ✅ 필수 | Haversine 공식으로 거리 계산 |
| 지도 위 경로 표시 | ✅ 필수 | 네이버/카카오맵 Polyline |
| 산책 중 사진 촬영 | ⭐ 선택 | 경로 위 사진 핀 |
| 산책 일시정지/재개 | ✅ 필수 | 상태 관리 |
| 산책 완료 요약 카드 | ✅ 필수 | 공유 가능한 결과 카드 |

### 4.2 소셜 & 경쟁

| 기능 | 우선순위 | 설명 |
|------|---------|------|
| 주간/월간 랭킹 | ✅ 필수 | 거리, 시간, 횟수 기준 |
| 동네별 랭킹 | ✅ 필수 | GPS 기반 지역 자동 분류 |
| 챌린지 시스템 | ✅ 필수 | "이번 주 50km", "7일 연속" 등 |
| 뱃지/업적 | ⭐ 선택 | 마일스톤 달성 시 자동 부여 |
| 팔로잉/피드 | ⭐ 선택 | 다른 사용자 산책 기록 보기 |
| 산책 초대 | ⭐ 선택 | 함께 산책 기능 |

### 4.3 반려동물 관리

| 기능 | 우선순위 | 설명 |
|------|---------|------|
| 펫 프로필 등록 | ✅ 필수 | 이름, 종, 나이, 사진 |
| 산책별 펫 선택 | ✅ 필수 | 멀티펫 지원 |
| 펫 산책 통계 | ⭐ 선택 | 펫별 누적 거리/시간 |
| 건강 기록 | 💡 향후 | 체중, 접종, 병원 방문 |

### 4.4 지도 & 공공데이터

| 기능 | 우선순위 | API |
|------|---------|-----|
| 산책 경로 지도 표시 | ✅ 필수 | 네이버 지도 / 카카오맵 |
| 주변 동물병원 | ✅ 필수 | 공공데이터: 동물병원 현황 |
| 날씨 정보 | ✅ 필수 | 기상청 단기예보 API |
| 반려동물 공원 | ⭐ 선택 | 공공데이터: 반려동물 놀이터 |
| 반려동물 동반 카페 | ⭐ 선택 | 카카오 로컬 API 검색 |

---

## 5. 기술 스택

### 5.1 프론트엔드

```
Framework:    Next.js 14 (App Router)
UI Library:   React 18
Styling:      Tailwind CSS + shadcn/ui
State:        Zustand (경량 상태관리)
Maps:         @react-naver-maps/navermap 또는 react-kakao-maps-sdk
PWA:          next-pwa (홈 화면 추가, 오프라인)
Charts:       Recharts (산책 통계 그래프)
```

### 5.2 백엔드

```
API:          Next.js API Routes (Route Handlers)
Auth:         NextAuth.js (카카오 로그인, 네이버 로그인)
Database:     Supabase (PostgreSQL + Realtime)
Storage:      Supabase Storage (사진 업로드)
Payment:      Toss Payments SDK
Push:         Web Push API + Firebase Cloud Messaging
```

### 5.3 외부 API

| API | 용도 | 비용 |
|-----|------|------|
| 네이버 지도 API | 산책 경로 표시, 장소 검색 | 무료 (일 200,000건) |
| 카카오맵 API | 지도 대안, 로컬 검색 | 무료 (일 300,000건) |
| 기상청 단기예보 | 산책 전 날씨 확인 | 무료 (공공데이터) |
| 동물병원 현황 | 주변 병원 표시 | 무료 (공공데이터) |
| Web Geolocation | GPS 좌표 추적 | 무료 (브라우저 내장) |
| 카카오 AdFit | 배너 광고 | 수익 (CPC/CPM) |
| Toss Payments | 결제 처리 | 수수료 3.3% |

### 5.4 인프라

```
Hosting:      Vercel (Next.js 최적화)
CDN:          Vercel Edge Network
Monitoring:   Vercel Analytics
Error:        Sentry
CI/CD:        GitHub Actions → Vercel 자동 배포
```

---

## 6. 데이터 모델 (주요 테이블)

```sql
-- 사용자
users (
  id, email, nickname, avatar_url,
  region, premium_until, created_at
)

-- 반려동물
pets (
  id, user_id, name, species, breed,
  age, weight, photo_url
)

-- 산책 기록
walks (
  id, user_id, pet_id,
  started_at, ended_at,
  distance_m, duration_sec,
  avg_speed, calories,
  route_geojson, -- GPS 경로 데이터
  photos, weather
)

-- 챌린지
challenges (
  id, title, description, type,
  goal_distance, goal_days,
  start_date, end_date
)

-- 랭킹 (주간/월간 집계)
rankings (
  id, user_id, period_type, period_key,
  total_distance, total_time, walk_count,
  rank, region
)

-- 뱃지
badges (
  id, user_id, badge_type,
  earned_at
)
```

---

## 7. 화면별 상세 설계

### 7.1 홈 화면 (/)

```
┌──────────────────────────┐
│  🐾 PetRun    [🔔] [👤]  │  ← 헤더
├──────────────────────────┤
│  오늘의 날씨: ☀️ 12°C     │  ← 날씨 위젯
│  산책하기 좋은 날이에요!   │
├──────────────────────────┤
│  ┌──────────────────┐    │
│  │  이번 주 산책      │    │  ← 주간 요약 카드
│  │  12.5km  3회      │    │
│  │  ████████░░ 70%   │    │  ← 주간 목표 진행률
│  └──────────────────┘    │
├──────────────────────────┤
│  🏆 동네 랭킹             │  ← 실시간 랭킹
│  1. 초코아빠  45.2km      │
│  2. 나         38.1km  ← │
│  3. 달이맘    32.7km      │
├──────────────────────────┤
│  🎯 진행 중 챌린지         │  ← 챌린지
│  ┌────┐ ┌────┐ ┌────┐   │
│  │주50 │ │7일 │ │공원│   │
│  │km  │ │연속│ │5곳 │   │
│  └────┘ └────┘ └────┘   │
├──────────────────────────┤
│  📍 주변 추천 코스         │  ← 추천 코스
│  • 한강공원 코스 (3.2km)  │
│  • 보라매공원 (2.1km)     │
├──────────────────────────┤
│  [🏠] [🗺️] [🚶] [🏆] [👤] │  ← 하단 네비게이션
└──────────────────────────┘
```

### 7.2 산책 화면 (/walk)

```
┌──────────────────────────┐
│         산책 시작          │
├──────────────────────────┤
│                          │
│   ┌──────────────────┐   │
│   │                  │   │
│   │   [네이버/카카오  │   │  ← 실시간 지도
│   │     지도 표시]    │   │     GPS 경로 그리기
│   │                  │   │
│   │    ···경로···    │   │
│   │                  │   │
│   └──────────────────┘   │
│                          │
│   ⏱️ 00:32:15            │  ← 타이머
│                          │
│   📏 2.34 km    🏃 4.3   │  ← 거리 / 속도(km/h)
│                          │
│   🔥 128 kcal   🐕 초코  │  ← 칼로리 / 펫
│                          │
│   ┌──────┐  ┌──────┐    │
│   │ ⏸ 일시│  │ ■ 종료│    │  ← 컨트롤 버튼
│   │  정지 │  │      │    │
│   └──────┘  └──────┘    │
│                          │
│  [🏠] [🗺️] [🚶] [🏆] [👤] │
└──────────────────────────┘
```

### 7.3 산책 완료 결과 카드

```
┌──────────────────────────┐
│     🎉 산책 완료!         │
├──────────────────────────┤
│                          │
│   ┌──────────────────┐   │
│   │  [경로 지도 축소] │   │
│   └──────────────────┘   │
│                          │
│   📏 거리    2.34 km     │
│   ⏱️ 시간    32분 15초   │
│   🏃 평균속도  4.3 km/h  │
│   🔥 칼로리   128 kcal   │
│                          │
│   🐕 초코와 함께한 산책!  │
│                          │
│   ┌─────────────────┐    │
│   │  📸 사진 추가     │    │
│   └─────────────────┘    │
│                          │
│   [공유하기]  [저장하기]   │
│                          │
│   ────── 광고 ──────     │  ← 네이티브 광고 영역
│                          │
└──────────────────────────┘
```

---

## 8. API 연동 상세

### 8.1 GPS 트래킹

```javascript
// Web Geolocation API 활용
const watchId = navigator.geolocation.watchPosition(
  (position) => {
    const { latitude, longitude, accuracy } = position.coords;
    // 경로 포인트 추가
    // 거리 누적 계산 (Haversine)
    // 지도 위 Polyline 업데이트
  },
  (error) => { /* 에러 처리 */ },
  {
    enableHighAccuracy: true,  // GPS 우선
    maximumAge: 5000,          // 5초 캐시
    timeout: 10000             // 10초 타임아웃
  }
);
```

### 8.2 네이버 지도 연동

```javascript
// react-naver-maps 사용 예시
<NaverMap
  center={{ lat: 37.5665, lng: 126.978 }}
  zoom={16}
>
  <Polyline
    path={walkRoute}  // GPS 좌표 배열
    strokeColor="#10B981"
    strokeWeight={5}
  />
  <Marker position={currentPosition} />
</NaverMap>
```

### 8.3 기상청 API

```
엔드포인트: http://apis.data.go.kr/1360000/VilageFcstInfoService_2.0
요청: 초단기실황조회 (getUltraSrtNcst)
응답: 기온(T1H), 습도(REH), 강수형태(PTY)
활용: 홈 화면 날씨 위젯, 산책 추천 알림
```

### 8.4 카카오 AdFit 광고

```javascript
// 배너 광고 삽입
<ins class="kakao_ad_area"
  data-ad-unit="DAN-xxxxx"
  data-ad-width="320"
  data-ad-height="100">
</ins>
```

---

## 9. 배지 & 챌린지 시스템

### 9.1 자동 배지

| 배지 | 조건 | 아이콘 |
|------|------|--------|
| 첫 산책 | 첫 산책 기록 | 🐾 |
| 10km 클럽 | 누적 10km | 🥉 |
| 50km 클럽 | 누적 50km | 🥈 |
| 100km 클럽 | 누적 100km | 🥇 |
| 7일 연속 | 7일 연속 산책 | 🔥 |
| 30일 연속 | 30일 연속 산책 | 💎 |
| 얼리버드 | 오전 6시 전 산책 | 🌅 |
| 올빼미 | 밤 10시 후 산책 | 🦉 |
| 마라토너 | 1회 산책 10km+ | 🏃 |
| 탐험가 | 10개 다른 코스 | 🧭 |

### 9.2 챌린지 예시

| 챌린지 | 기간 | 목표 | 보상 |
|--------|------|------|------|
| 주간 50km | 7일 | 총 50km | 특별 뱃지 + 100P |
| 7일 연속 산책 | 7일 | 매일 1회 | 뱃지 + 50P |
| 공원 5곳 방문 | 30일 | 5개 공원 | 뱃지 + 200P |
| 동네 1등 | 7일 | 주간 랭킹 1위 | 뱃지 + 300P |

---

## 10. MVP 개발 로드맵

### Phase 1: MVP (4주)

| 주차 | 작업 |
|------|------|
| 1주 | 프로젝트 셋업, 인증(카카오 로그인), DB 설계 |
| 2주 | 산책 트래킹 (GPS + 지도), 기록 저장 |
| 3주 | 랭킹 시스템, 펫 프로필, 주간 통계 |
| 4주 | 광고 연동, PWA, 테스트 & 배포 |

### Phase 2: 소셜 (3주)

- 팔로잉/팔로워
- 산책 피드
- 챌린지 시스템

### Phase 3: 수익화 (2주)

- 프리미엄 구독 (Toss Payments)
- 인앱 결제
- 광고 최적화

---

## 11. KPI 목표

| 지표 | 1개월 | 3개월 | 6개월 |
|------|-------|-------|-------|
| MAU | 500 | 3,000 | 10,000 |
| DAU | 100 | 800 | 3,000 |
| 일평균 산책 | 200건 | 1,500건 | 5,000건 |
| 프리미엄 전환율 | - | 3% | 5% |
| 월 광고 수익 | 5만원 | 30만원 | 100만원 |
| 월 구독 수익 | - | 35만원 | 195만원 |

---

*작성일: 2026-02-09*
*버전: 1.0*
