# 마이페이지 화면 (Tab 5) - 멍이랑 (withbowwow)

> 나와 내 반려동물의 모든 것. 산책 기록, 뱃지 컬렉션, 설정을 한곳에서.
> **통합 뱃지 시스템**의 메인 허브. 기존 "배지 컬렉션"과 "챌린지"를 하나로 합친다.

---

## 1. 페이지 개요

### 1.1 목적

마이페이지는 사용자의 **개인 대시보드이자 성장 기록 아카이브**다. (1) 반려동물 프로필과 건강 정보를 관리하고, (2) 산책 기록을 캘린더/리스트/그래프로 확인하며, (3) 통합 뱃지 시스템에서 달성한 뱃지와 진행 중인 뱃지를 탐색하고, (4) 앱 설정을 관리한다. 특히 이 화면은 **뱃지 시스템 통합**이 가장 크게 반영되는 핵심 페이지다. 기존에 분리되어 있던 "배지 컬렉션"과 "챌린지 시스템"을 하나의 통합 뱃지 그리드로 합치고, 진행 중인 뱃지를 상단에 하이라이트하여 기존 챌린지의 역할을 대체한다.

### 1.2 핵심 사용자 니즈

| 니즈 | 설명 | 우선순위 |
|------|------|---------|
| 내 반려동물 정보 관리 | 프로필 사진, 건강 정보, 체중 기록 | 상위 |
| 산책 히스토리 확인 | 과거 산책 기록을 다양한 뷰로 확인 | 상위 |
| 뱃지 확인 및 목표 설정 | 획득/진행중/미발견 뱃지 탐색 | 최상위 |
| 성장 추이 확인 | 주간/월간 통계 그래프로 발전 추이 확인 | 중위 |
| 앱 설정 관리 | 알림, 구독, 계정, 개인정보 설정 | 중위 |

### 1.3 진입 경로

| 경로 | 빈도 | 컨텍스트 |
|------|------|---------|
| 하단 탭 바 "MY" 탭 | 높음 | 일상적 프로필/기록 확인 |
| 홈 → 프로필 아이콘 탭 | 중간 | 헤더의 프로필 아이콘 |
| 산책 완료 → 뱃지 획득 → "컬렉션 보기" | 높음 | 새 뱃지 획득 후 전체 컬렉션 확인 |
| 홈 → 진행 중 뱃지 → "전체보기" | 중간 | 뱃지 진행률 상세 확인 |
| 푸시 알림 (뱃지 달성 임박) | 중간 | "5km 뱃지까지 0.3km!" 딥링크 |

---

## 2. 화면 구성

### 섹션 1: 프로필 헤더 (Profile Header)

#### 콘텐츠 구성

| 요소 | 상세 |
|------|------|
| 닉네임 | "초코아빠" (Bold, 20pt) - 수정 가능 |
| 닉네임 하단 | 가입일 표시 "멍이랑과 함께한 지 47일째" |
| 설정 아이콘 | 우측 상단 톱니바퀴 아이콘 → 설정 스크린 |
| 프리미엄 뱃지 | 구독자인 경우 닉네임 옆에 다이아몬드 아이콘 |

#### 이 콘텐츠가 있는 이유

> 프로필 헤더는 **"이 앱에서의 나"**를 정의하는 영역이다.
>
> - **사용자 행동 심리학**: Identity-Based Habits(정체성 기반 습관)에 따르면 "나는 매일 산책하는 사람"이라는 정체성이 형성되면 습관이 자연스럽게 따라온다. "멍이랑과 함께한 지 47일째"라는 텍스트는 앱 사용 자체를 정체성의 일부로 만든다. 또한 Sunk Cost Effect에 의해 47일의 기록이 있는 사용자는 앱을 떠나기 어렵다.
> - **비즈니스 목표**: 견주의 개인정보(실명, 사진, 성별 등)는 수집하지 않고 닉네임만 표시한다. 이는 멍이랑의 핵심 프라이버시 정책이자 차별화 요소다. 프리미엄 뱃지는 구독자에게 "특별함"을 부여하여 구독 유지 동기를 강화한다.
> - **벤치마킹**: Instagram의 프로필 상단은 사용자명 + 게시물/팔로워/팔로잉 카운트로 구성된다. 멍이랑은 사람 중심이 아닌 반려동물 중심이므로, 사람 프로필은 미니멀하게 처리한다.

---

### 섹션 2: 반려동물 프로필 (Pet Profile - Main Section)

#### 콘텐츠 구성

| 요소 | 상세 |
|------|------|
| 대표 사진 | 반려동물 프로필 사진 (원형, 100px), 탭하면 전체화면 |
| 이름 | "초코" (Bold, 24pt) |
| 기본 정보 | 견종: 골든리트리버 / 나이: 3살 / 체중: 28kg |
| 수정 버튼 | "정보 수정" 텍스트 링크 |
| 누적 통계 | 총 거리, 총 시간, 총 횟수 (3칸 그리드) |
| 건강 기록 | 체중 변화 미니 그래프 + 접종 기록 + 병원 방문 |
| 멀티펫 스와이프 | 반려동물 2마리 이상일 때 좌우 스와이프로 전환 |
| 페이지 인디케이터 | 점(dot) 인디케이터 (반려동물 수만큼) |

#### 누적 통계 그리드

```
┌───────────┬───────────┬───────────┐
│  📏 총 거리 │  ⏱️ 총 시간 │  🐾 총 횟수 │
│  187.3 km  │  62시간    │  89회     │
└───────────┴───────────┴───────────┘
```

#### 건강 기록 영역

| 요소 | 상세 |
|------|------|
| 체중 변화 | 최근 6개월 체중 미니 라인 그래프 |
| 접종 기록 | 다음 접종 예정일 알림 |
| 병원 방문 | 최근 방문일 + 메모 |
| 추가 버튼 | "기록 추가" |

#### 멀티펫 스와이프

```
← 스와이프 →

[🐕 초코]  ·  [🐱 나비]  ·  [🐕 몽이]
   ●           ○            ○      ← 페이지 인디케이터
```

#### 이 콘텐츠가 있는 이유

> 반려동물 프로필은 마이페이지의 **감정적 중심(emotional anchor)**이다.
>
> - **사용자 행동 심리학**: 반려동물의 사진과 이름을 프로필의 가장 큰 영역에 배치하는 것은 의도적이다. Endowment Effect(보유 효과)에 의해 "내 반려동물의 기록"은 일반적인 운동 기록보다 훨씬 더 높은 가치를 느낀다. "초코가 187.3km를 걸었다"는 사실은 보호자에게 자부심과 보살핌의 증거가 된다. 또한 이 데이터는 앱의 Lock-in Effect를 극대화한다. 6개월간의 체중 변화, 접종 기록이 쌓인 앱을 쉽게 떠나지 못한다.
> - **비즈니스 목표**: (1) 멀티펫 지원은 사용자당 데이터를 증가시킨다. 반려동물이 2마리면 산책 데이터가 2배로 생성되고, 앱 사용 빈도도 높아진다. (2) 건강 기록 기능은 프리미엄의 핵심 차별화 요소다. 무료에서는 기본 프로필만, 프리미엄에서는 상세 건강 리포트(체중 추이 분석, 산책량 대비 체중 변화 상관관계 등)를 제공한다. (3) 접종/병원 기록은 향후 동물병원 파트너십, 반려동물 보험 연동 등 B2B 수익 확장의 기반 데이터가 된다.
> - **벤치마킹**: Apple Health의 개인 건강 대시보드 구조를 반려동물에 적용. Samsung Health의 체중 추적 그래프 UX 참고. Fitbit의 반려동물 건강 정보는 직접적 벤치마킹 대상이다.

---

### 섹션 3: 산책 기록 (Walk History)

#### 콘텐츠 구성

| 요소 | 상세 |
|------|------|
| 섹션 헤더 | "산책 기록" |
| 뷰 전환 탭 | [캘린더] / [리스트] / [통계] |
| 기본 뷰 | 캘린더 뷰 |

#### 3-1. 캘린더 뷰 (Calendar View)

| 요소 | 상세 |
|------|------|
| 월 표시 | 좌우 화살표로 월 이동 |
| 날짜 셀 | 산책한 날: Primary 컬러 원형 배경 + 산책 횟수 |
| 연속 산책 표시 | 연속일 사이 라인 연결 (시각적 스트릭) |
| 날짜 탭 | 해당 날짜의 산책 상세 바텀시트 |
| 오늘 표시 | 테두리로 오늘 날짜 강조 |

```
       2026년 2월
일  월  화  수  목  금  토
                      1
2   3  ④  ⑤  ⑥  7   8
9  ⑩  ⑪  12  13  14  15
16  17  18  19  20  21  22
23  24  25  26  27  28

④⑤⑥: 연속 3일 산책 (컬러 + 라인 연결)
⑩⑪: 연속 2일 산책
```

#### 3-2. 리스트 뷰 (List View)

| 요소 | 상세 |
|------|------|
| 정렬 | 최신순 (날짜별 그룹핑) |
| 항목 구성 | 날짜 + 시간 + 반려동물 + 미니 경로맵 + 거리 + 시간 |
| 탭 액션 | 산책 상세 스크린으로 이동 |
| 필터 | 반려동물별 필터 (멀티펫인 경우) |

```
── 2월 11일 (화) ──
┌──────────────────────────────┐
│ [미니맵] 오후 3시 · 초코       │
│          2.34km · 32분        │
└──────────────────────────────┘
┌──────────────────────────────┐
│ [미니맵] 오전 8시 · 초코       │
│          1.87km · 25분        │
└──────────────────────────────┘

── 2월 10일 (월) ──
┌──────────────────────────────┐
│ [미니맵] 오후 6시 · 초코       │
│          3.12km · 48분        │
└──────────────────────────────┘
```

#### 3-3. 통계 그래프 뷰 (Statistics View)

| 요소 | 상세 |
|------|------|
| 기간 선택 | [주간] / [월간] / [3개월] / [6개월] / [1년] |
| 주요 그래프 | 막대 그래프 (일별 산책 거리) |
| 보조 수치 | 기간 내 총 거리, 평균 거리, 산책 횟수, 최장 산책 |
| 추이 비교 | "지난 주 대비 +23%" 등 변화율 표시 |
| 반려동물 필터 | 멀티펫인 경우 반려동물별 통계 분리 |

```
이번 주 산책 거리 (km)

5 │        ██
4 │  ██    ██
3 │  ██    ██  ██
2 │  ██ ██ ██  ██
1 │  ██ ██ ██  ██
0 └──월─화─수─목─금─토─일──

총 거리: 18.5km  평균: 3.7km/일
산책 횟수: 5회   최장: 5.2km
📈 지난 주 대비 +23%
```

#### 이 콘텐츠가 있는 이유

> 산책 기록은 사용자의 **성장 궤적을 시각화**하는 핵심 영역이다.
>
> - **사용자 행동 심리학**: Self-Monitoring(자기 모니터링)은 행동 변화의 가장 효과적인 도구 중 하나다. 자신의 행동을 기록하고 시각화하면 목표 달성 확률이 크게 높아진다. 캘린더 뷰의 "연속 산책 표시"는 Streak Effect를 활용한다. Jerry Seinfeld의 "Don't Break the Chain" 방법론처럼, 연속일이 눈에 보이면 "오늘 끊기 싫다"는 강력한 동기가 생긴다. 통계 그래프는 장기적 성장을 보여줘 "나는 발전하고 있다"는 자기효능감을 강화한다.
> - **비즈니스 목표**: (1) 캘린더 뷰는 "빈 날짜"를 시각적으로 보여줌으로써 산책 빈도 증가를 유도한다. (2) 통계 뷰의 상세 분석(구간별 속도, 고도 변화 등)은 프리미엄 기능으로 잠금 처리하여 전환을 유도한다. (3) 장기간 축적된 산책 데이터는 앱의 Lock-in Effect를 극대화한다.
> - **벤치마킹**: Apple Fitness의 Activity 캘린더는 운동한 날을 컬러로 표시하고 스트릭을 시각화한다. Nike Run Club의 Activity 탭은 주간/월간 거리 그래프를 보여준다. Duolingo의 Streak 시스템(연속 학습일 표시)은 캘린더 기반 연속 기록의 대표 사례다.

---

### 섹션 4: 뱃지 컬렉션 (Badge Collection - 통합 시스템 핵심)

> **이 섹션은 이번 리디자인의 가장 핵심적인 변경사항이다.**
> 기존에 분리되어 있던 "배지 컬렉션"과 "챌린지 시스템"을 하나의 통합 인터페이스로 합친다.

#### 4-0. 통합 설계 배경

| 기존 (분리) | 신규 (통합) |
|------------|------------|
| 배지 컬렉션: 획득/미획득 뱃지 그리드 | 통합 뱃지 그리드: 획득/진행중/미발견 3상태 |
| 챌린지 스크린: 진행중/참여가능/완료 챌린지 | 진행 중인 뱃지가 상단에 하이라이트 (챌린지 역할) |
| 두 곳을 왔다갔다 해야 함 | 한 화면에서 모든 목표와 성취를 관리 |
| "배지"와 "챌린지"의 개념적 혼동 | "뱃지" 하나의 개념으로 통일 |

#### 4-1. 콘텐츠 구성 (마이페이지 내 미리보기)

| 요소 | 상세 |
|------|------|
| 섹션 헤더 | "뱃지 컬렉션" + 획득 수 "12/47" + "전체보기 >" |
| 진행 중 뱃지 하이라이트 | 상단에 가로 스크롤로 진행 중인 뱃지 표시 (기존 챌린지 역할) |
| 최근 획득 뱃지 | 2x3 그리드로 최근 획득한 뱃지 6개 표시 |
| 전체보기 버튼 | "전체 뱃지 컬렉션 보기" → 별도 스크린 |

#### 4-2. 진행 중 뱃지 하이라이트 (In-Progress Badges - 기존 챌린지 대체)

```
진행 중인 뱃지 (3개)

┌───────────┐ ┌───────────┐ ┌───────────┐
│  🏃 (반투명) │ │  🔥 (반투명) │ │  🧭 (반투명) │
│  10km 클럽  │ │  7일 연속   │ │  탐험가 Lv2 │
│  ▓▓▓▓▓▓░░ │ │  ▓▓▓▓░░░░ │ │  ▓▓░░░░░░ │  ← 가로 스크롤
│  7.2/10km  │ │  4/7일     │ │  3/10곳    │
│  72%       │ │  57%       │ │  30%       │
│ 남은: 2.8km │ │ 남은: 3일   │ │ 남은: 7곳  │
└───────────┘ └───────────┘ └───────────┘
```

#### 이 하이라이트가 기존 "챌린지"를 대체하는 방법

| 기존 챌린지 기능 | 통합 뱃지에서의 구현 |
|----------------|-------------------|
| "이번 주 50km" 챌린지 | "50km 클럽" 거리 뱃지의 진행률 표시 |
| "7일 연속 산책" 챌린지 | "7일 연속" 연속 뱃지의 진행률 표시 |
| "공원 5곳 방문" 챌린지 | "탐험가 Lv1" 탐험 뱃지의 진행률 표시 |
| 챌린지 참여/포기 | 뱃지는 자동 추적, 참여/포기 없음 (항상 진행) |
| 챌린지 완료 보상 (포인트) | 뱃지 획득 자체가 보상 + 프리미엄 사용자 추가 보상 |
| 챌린지 기간 제한 | 거리/시간/탐험 뱃지는 기간 없음, 시즌 뱃지만 기간 한정 |

#### 4-3. 뱃지 3가지 상태 (Badge States)

| 상태 | 영문 | 시각적 표현 | 상세 |
|------|------|-----------|------|
| 획득 | earned | 풀 컬러 + 글로우 이펙트 + 획득 날짜 | 밝고 선명한 색상, 미세한 빛남 효과 |
| 진행중 | in_progress | 반투명 아이콘 + 프로그레스 바 + 수치 | 60% 불투명도, 하단에 진행률 |
| 미발견 | locked | 회색 실루엣 + 자물쇠 아이콘 + "???" | 완전 회색, 조건 힌트만 표시 |

#### 시각적 표현 상세

```
┌─────────┐  ┌─────────┐  ┌─────────┐
│  🏃✨    │  │  🔥     │  │  🔒     │
│ (풀컬러)  │  │ (반투명) │  │ (회색)   │
│ 글로우    │  │         │  │ ???     │
│          │  │ ▓▓▓░░   │  │         │
│ 5km 클럽 │  │ 57%     │  │ 비밀 뱃지 │
│ 2/10 획득 │  │ 4/7일   │  │ 조건: ?? │
└─────────┘  └─────────┘  └─────────┘
  [earned]   [in_progress]   [locked]
```

#### 4-4. 뱃지 카테고리 (Badge Categories)

##### 카테고리 1: 거리 뱃지 (Distance Badges)

| 뱃지 이름 | 조건 | 아이콘 | 난이도 |
|----------|------|--------|--------|
| 첫 발자국 | 누적 1km | 🐾 | 입문 |
| 5km 클럽 | 누적 5km | 🏃 | 쉬움 |
| 10km 탐험가 | 누적 10km | 🗺️ | 보통 |
| 50km 마라토너 | 누적 50km | 🏅 | 어려움 |
| 100km 철인 | 누적 100km | 🥇 | 매우 어려움 |
| 500km 전설 | 누적 500km | 👑 | 전설 |
| 1000km 신화 | 누적 1000km | 💎 | 신화 |

##### 카테고리 2: 연속 뱃지 (Streak Badges)

| 뱃지 이름 | 조건 | 아이콘 | 난이도 |
|----------|------|--------|--------|
| 3일 연속 | 3일 연속 산책 | 🔥 | 입문 |
| 일주일 전사 | 7일 연속 산책 | 💪 | 쉬움 |
| 2주 챔피언 | 14일 연속 산책 | ⚡ | 보통 |
| 한 달 철인 | 30일 연속 산책 | 🌟 | 어려움 |
| 60일 마스터 | 60일 연속 산책 | 🏆 | 매우 어려움 |
| 100일 레전드 | 100일 연속 산책 | 🔱 | 전설 |
| 365일 신화 | 365일 연속 산책 | 💎 | 신화 |

##### 카테고리 3: 탐험 뱃지 (Exploration Badges)

| 뱃지 이름 | 조건 | 아이콘 | 난이도 |
|----------|------|--------|--------|
| 동네 탐험가 | 3곳 방문 | 🧭 | 입문 |
| 코스 수집가 | 5곳 방문 | 📍 | 쉬움 |
| 지역 탐험대장 | 10곳 방문 | 🗺️ | 보통 |
| 산책 마스터 | 20곳 방문 | 🏔️ | 어려움 |
| 전국 여행자 | 50곳 방문 | ✈️ | 전설 |

##### 카테고리 4: 시간 뱃지 (Time Badges)

| 뱃지 이름 | 조건 | 아이콘 | 난이도 |
|----------|------|--------|--------|
| 첫 1시간 | 누적 1시간 | ⏱️ | 입문 |
| 5시간 러너 | 누적 5시간 | ⏰ | 쉬움 |
| 10시간 워커 | 누적 10시간 | 🕐 | 보통 |
| 50시간 마스터 | 누적 50시간 | 🕰️ | 어려움 |
| 100시간 레전드 | 누적 100시간 | 💫 | 전설 |

##### 카테고리 5: 스페셜 뱃지 (Special Badges)

| 뱃지 이름 | 조건 | 아이콘 | 설명 |
|----------|------|--------|------|
| 얼리버드 | 오전 6시 전 산책 시작 | 🌅 | 이른 아침 산책 |
| 올빼미 | 밤 10시 이후 산책 시작 | 🦉 | 늦은 밤 산책 |
| 레인 워커 | 비 오는 날 산책 | 🌧️ | 기상청 API 강수 감지 |
| 스노우 워커 | 눈 오는 날 산책 | ❄️ | 기상청 API 강설 감지 |
| 새해 첫 산책 | 1월 1일 산책 | 🎆 | 새해 기념 |
| 생일 산책 | 반려동물 생일에 산책 | 🎂 | 반려동물 생일 기준 |
| 마라토너 | 1회 산책 10km 이상 | 🏃‍♂️ | 초장거리 산책 |
| 소셜 워커 | 함께 산책 5회 | 🤝 | 산책 초대 기능 연동 |
| 사진 작가 | 산책 중 사진 50장 촬영 | 📸 | 카메라 사용 유도 |
| 랭킹 챔피언 | 동네 랭킹 1위 달성 | 👑 | 주간 랭킹 기준 |

##### 카테고리 6: 시즌 뱃지 (Season Badges - 한정)

| 뱃지 이름 | 조건 | 기간 | 아이콘 |
|----------|------|------|--------|
| 봄꽃길 | 3~5월에 공원 5곳 방문 | 3/1~5/31 | 🌸 |
| 여름바다 | 6~8월에 해안가 산책 3회 | 6/1~8/31 | 🏖️ |
| 가을단풍 | 9~11월에 산 또는 공원 5곳 | 9/1~11/30 | 🍂 |
| 겨울왕국 | 12~2월에 눈 오는 날 산책 | 12/1~2/28 | ⛄ |

시즌 뱃지는 **기간이 지나면 획득 불가능**하며, "수집형 희소성"을 부여한다.

#### 4-5. 전체 뱃지 컬렉션 스크린 (Badge Collection Full Screen)

마이페이지에서 "전체보기"를 탭하면 별도 스크린으로 이동한다.

| 요소 | 상세 |
|------|------|
| 상단 요약 | "12/47 뱃지 획득" + 완성률 프로그레스 바 |
| 카테고리 필터 | [전체] [거리] [연속] [탐험] [시간] [스페셜] [시즌] |
| 뱃지 그리드 | 4열 그리드, 3가지 상태별 시각 표현 |
| 정렬 옵션 | 카테고리순 / 획득일순 / 진행률순 |
| 진행중 뱃지 우선 | 상단에 진행 중 뱃지 섹션 별도 표시 |

#### 뱃지 그리드 레이아웃

```
── 진행 중 (3개) ──

┌──────┐ ┌──────┐ ┌──────┐
│🏃    │ │🔥    │ │🧭    │
│72%   │ │57%   │ │30%   │
│▓▓▓░  │ │▓▓░░  │ │▓░░░  │
└──────┘ └──────┘ └──────┘

── 🏃 거리 뱃지 ──

┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐
│🐾✨  │ │🏃✨  │ │🗺️   │ │🔒    │
│첫발자│ │5km   │ │10km  │ │???   │
│국✓   │ │클럽✓ │ │72%   │ │      │
└──────┘ └──────┘ └──────┘ └──────┘

── 🔥 연속 뱃지 ──

┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐
│🔥✨  │ │💪✨  │ │⚡    │ │🔒    │
│3일✓  │ │7일   │ │14일  │ │???   │
│      │ │57%   │ │0%    │ │      │
└──────┘ └──────┘ └──────┘ └──────┘
```

#### 4-6. 뱃지 상세 보기 (Badge Detail - Tap to View)

뱃지를 탭하면 모달 또는 바텀시트로 상세 정보를 표시한다.

##### 획득한 뱃지 상세

```
┌──────────────────────────────┐
│           🏃✨                │
│        (대형, 글로우)          │
│                              │
│       5km 클럽               │
│   "누적 5킬로미터를 걸었어요"  │
│                              │
│   📅 획득일: 2026.02.08      │
│   🐕 함께한 반려동물: 초코     │
│                              │
│   ── 통계 ──                 │
│   첫 산책: 2026.01.15        │
│   달성까지: 7회 산책           │
│   달성까지: 12일 소요          │
│                              │
│   [공유하기]  [닫기]           │
└──────────────────────────────┘
```

##### 진행 중인 뱃지 상세

```
┌──────────────────────────────┐
│           🗺️                 │
│        (반투명, 대형)          │
│                              │
│       10km 탐험가             │
│   "누적 10킬로미터에 도전!"    │
│                              │
│   ▓▓▓▓▓▓▓░░░  72%           │
│   7.2km / 10km               │
│   남은 거리: 2.8km            │
│                              │
│   💡 예상 달성일:              │
│   현재 페이스로 약 2일 뒤      │
│                              │
│   ── 진행 기록 ──             │
│   2/11: +2.34km (7.2km)      │
│   2/10: +1.87km (4.86km)     │
│   2/09: +3.12km (2.99km)     │
│                              │
│   [닫기]                      │
└──────────────────────────────┘
```

##### 미발견 뱃지 상세

```
┌──────────────────────────────┐
│           🔒                 │
│        (회색, 대형)           │
│                              │
│       ??? 비밀 뱃지           │
│                              │
│   힌트: "특별한 날씨에        │
│          산책해보세요"         │
│                              │
│   [닫기]                      │
└──────────────────────────────┘
```

#### 이 콘텐츠가 있는 이유 (통합 뱃지 시스템 전체)

> 통합 뱃지 시스템은 이번 리디자인의 **가장 중요한 구조적 변경**이다. 기존에 "배지 컬렉션"과 "챌린지"로 분리되어 있던 두 시스템을 하나로 합치는 이유와 기대 효과를 상세히 설명한다.
>
> **1. 통합의 근본 이유: 인지 부하(Cognitive Load) 감소**
>
> 기존 구조에서 사용자는 "배지"와 "챌린지"가 어떻게 다른지 이해해야 했다. "7일 연속 산책 챌린지"와 "7일 연속 배지"는 동일한 행동에 대한 두 가지 표현이었으나, 서로 다른 화면에서 관리되었다. 이는 Miller's Law(한 번에 처리할 수 있는 정보 단위는 7+-2개)를 위반하여 불필요한 인지 부하를 발생시켰다. 통합 뱃지 시스템에서는 "뱃지"라는 단일 개념만 이해하면 된다. 뱃지의 상태(획득/진행중/미발견)가 기존의 챌린지 기능을 자연스럽게 대체한다.
>
> **2. Apple Fitness 업적 시스템 벤치마킹**
>
> Apple Fitness(구 Apple Watch Activity)의 업적(Awards) 시스템은 통합 뱃지의 직접적 벤치마킹 대상이다. Apple은 챌린지와 업적을 분리하지 않는다. "이번 달 200% Move Goal 달성"이라는 하나의 업적이 (1) 진행 중일 때는 진행률을 보여주고, (2) 달성하면 화려한 3D 메달 애니메이션으로 보상한다. 사용자는 "업적" 탭 하나에서 모든 것을 관리한다. 멍이랑의 통합 뱃지는 이 패턴을 따른다.
>
> **3. Pikmin Bloom의 수집형 보상 벤치마킹**
>
> Pikmin Bloom은 걸음 수 기반으로 다양한 Pikmin(캐릭터)을 수집하는 시스템이다. 모든 Pikmin은 "수집했거나 아직 수집하지 못한" 상태만 존재하며, 별도의 "챌린지"라는 개념이 없다. 일상적 산책이 자연스럽게 수집으로 이어지는 구조다. 멍이랑의 뱃지도 "산책하면 자동으로 진행되고, 조건을 충족하면 자동으로 획득되는" 무마찰(frictionless) 구조를 목표로 한다.
>
> **4. 게이미피케이션 심리학적 근거**
>
> - **수집 욕구 (Collection Instinct)**: 인간은 본능적으로 세트를 완성하고 싶어한다. "12/47"이라는 숫자는 "나머지 35개도 모으고 싶다"는 욕구를 자극한다.
> - **진행 감지 (Progress Tracking)**: 진행 중 뱃지의 프로그레스 바는 Endowed Progress Effect를 활용하여 "이미 시작한 것을 완료하고 싶다"는 심리를 작동시킨다.
> - **희소성 (Scarcity)**: 시즌 뱃지의 기간 한정은 FOMO를 활용한다. "이번 겨울이 지나면 '겨울왕국' 뱃지를 영영 못 얻는다"는 인식이 산책 동기를 급격히 높인다.
> - **놀라움 (Surprise)**: 미발견(locked) 뱃지의 "???"는 호기심을 자극한다. "비밀 뱃지가 뭘까?"라는 궁금증이 다양한 산책 행동을 시도하게 만든다.
> - **사회적 과시 (Social Display)**: 획득한 뱃지를 소셜 피드에 공유하고, 프로필에 대표 뱃지를 설정할 수 있다. 이는 Self-Presentation Theory에 기반한 외재적 동기다.
>
> **5. 비즈니스 임팩트**
>
> - 기존 "챌린지 스크린"을 제거하여 화면 수를 줄이고 개발/유지보수 비용 감소
> - "참여/포기" 개념 제거로 사용자의 실패 경험 감소 → 이탈률 감소
> - 뱃지 완성률이 프리미엄 전환의 예측 변수 (뱃지 30% 이상 획득한 사용자의 프리미엄 전환율이 가장 높을 것으로 예상)
> - 시즌 뱃지의 한정성이 분기별 리텐션 캠페인의 핵심 도구

---

### 섹션 5: 설정 (Settings)

#### 콘텐츠 구성

| 요소 | 상세 |
|------|------|
| 진입 | 프로필 헤더의 톱니바퀴 아이콘 탭 → 별도 스크린 푸시 |
| 설정 카테고리 | 5개 그룹 |

#### 설정 항목 상세

##### 5-1. 알림 설정

| 항목 | 기본값 | 설명 |
|------|--------|------|
| 산책 리마인더 | ON | 매일 설정 시간에 산책 알림 |
| 리마인더 시간 | 18:00 | 시간 피커로 설정 |
| 뱃지 달성 임박 | ON | "5km 뱃지까지 0.3km!" |
| 뱃지 획득 | ON | 새 뱃지 획득 시 알림 |
| 랭킹 변동 | ON | 순위 상승/하락 시 알림 |
| 소셜 알림 | ON | 팔로우, 좋아요, 댓글, 초대 |
| 시즌 뱃지 마감 임박 | ON | "겨울왕국 뱃지 마감 7일 전!" |

##### 5-2. 구독 관리

| 항목 | 상세 |
|------|------|
| 현재 플랜 | "무료" 또는 "프리미엄 (월 3,900원)" |
| 프리미엄 혜택 | 혜택 목록 표시 |
| 구독/해지 | App Store / Google Play 연동 |
| 결제 내역 | 과거 결제 이력 |

##### 5-3. 계정 설정

| 항목 | 상세 |
|------|------|
| 닉네임 변경 | 텍스트 입력 (한글/영문/숫자, 2~12자) |
| 연결된 계정 | 카카오/네이버/Apple 로그인 표시 |
| 지역 설정 | GPS 자동 또는 수동 설정 |
| 산책 단위 | km / mile |

##### 5-4. 개인정보

| 항목 | 상세 |
|------|------|
| 개인정보처리방침 | 웹뷰로 표시 |
| 서비스 이용약관 | 웹뷰로 표시 |
| 위치정보 이용약관 | 웹뷰로 표시 |
| 데이터 내보내기 | 내 산책 데이터 JSON/CSV 다운로드 |
| 계정 삭제 | 30일 유예 후 완전 삭제 |

##### 5-5. 기타

| 항목 | 상세 |
|------|------|
| 앱 버전 | "v1.0.0 (build 100)" |
| 고객센터 | 이메일 / 카카오채널 링크 |
| 로그아웃 | 확인 다이얼로그 후 로그아웃 |

#### 이 콘텐츠가 있는 이유

> 설정은 사용자가 앱 경험을 **개인화(personalize)**하는 영역이다.
>
> - **알림 설정의 중요성**: 산책 리마인더는 Trigger의 핵심이다. 매일 오후 6시 "초코가 산책을 기다리고 있어요"라는 알림은 앱 재방문의 가장 강력한 트리거다. 그러나 과도한 알림은 앱 삭제로 이어지므로, 사용자가 각 알림의 ON/OFF를 세밀하게 조절할 수 있어야 한다.
> - **데이터 내보내기**: GDPR/개인정보보호법 준수를 위해 필수이며, 동시에 사용자 신뢰를 구축한다. "내 데이터는 내가 관리한다"는 인식은 앱에 대한 신뢰도를 높인다.
> - **계정 삭제 30일 유예**: 충동적 삭제를 방지하면서도 사용자의 권리를 보장한다.

---

## 3. UX 설계 의도

### 3.1 정보 계층 구조

```
[1순위 - 정서적 연결]
  └── 프로필 헤더 (나의 정체성)
  └── 반려동물 프로필 (감정적 중심)

[2순위 - 성장 확인]
  └── 산책 기록 (캘린더/리스트/통계)
  └── 뱃지 컬렉션 (성취/진행/목표)

[3순위 - 관리]
  └── 설정 (개인화)
```

핵심 원칙: **위에서 아래로 갈수록 "감정" → "성장" → "관리" 순서**로 배치한다. 마이페이지를 열면 가장 먼저 내 반려동물을 보고 정서적 유대를 느끼고, 아래로 스크롤하면서 산책 기록과 뱃지로 성장을 확인하며, 필요할 때 설정으로 진입한다.

### 3.2 인터랙션 패턴

| 패턴 | 적용 위치 | 설명 |
|------|----------|------|
| Swipe to Switch Pet | 반려동물 프로필 | 좌우 스와이프로 펫 전환 |
| Tab Navigation | 산책 기록 | 캘린더/리스트/통계 탭 전환 |
| Tap to Expand | 뱃지 아이템 | 탭하면 상세 모달/바텀시트 |
| Grid Layout | 뱃지 컬렉션 | 4열 그리드 |
| Horizontal Scroll | 진행 중 뱃지 | 가로 스크롤 카드 |
| Pull-to-Refresh | 전체 화면 | 데이터 새로고침 |
| Scroll to Section | 헤더 탭 | 섹션 바로가기 (선택) |
| Celebration Animation | 뱃지 획득 | Lottie 축하 애니메이션 |
| Share Sheet | 뱃지 상세 | 획득 뱃지 SNS 공유 |
| Haptic Feedback | 뱃지 탭 | 가벼운 진동 |

### 3.3 접근성 고려사항

| 항목 | 대응 |
|------|------|
| 색상 대비 | 뱃지 3가지 상태가 색상 외에도 형태(글로우/반투명/자물쇠)로 구분 |
| 스크린 리더 | "5km 클럽 뱃지, 획득완료, 2026년 2월 8일" |
| 프로그레스 바 | aria-label="72퍼센트 진행, 10킬로미터 중 7.2킬로미터" |
| 터치 영역 | 뱃지 그리드 각 셀 최소 44x44px |
| 멀티펫 스와이프 | 스와이프 외에 좌/우 화살표 버튼 대안 제공 |
| 캘린더 접근성 | 각 날짜에 "2월 11일, 산책 2회, 총 4.21킬로미터" 라벨 |

---

## 4. 와이어프레임 (ASCII)

```
┌──────────────────────────────┐
│  초코아빠 💎            [⚙️]  │  ← 프로필 헤더
│  멍이랑과 함께한 지 47일째    │     (프리미엄 뱃지)
├──────────────────────────────┤
│                              │
│        ┌──────────┐          │
│        │  [🐕📷]  │          │  ← 반려동물 프로필
│        │   초코    │          │
│        └──────────┘          │
│  골든리트리버 · 3살 · 28kg    │
│         [정보 수정]           │
│                              │
│  ┌────────┬────────┬────────┐│
│  │📏 총거리│⏱️ 총시간│🐾 총횟수││  ← 누적 통계
│  │187.3km │ 62시간  │ 89회   ││
│  └────────┴────────┴────────┘│
│                              │
│  건강기록  [체중] [접종] [병원]│  ← 건강 기록 탭
│  📊 28.2→27.8→28.0→28.1 kg  │
│         ● ○ ○               │  ← 멀티펫 인디케이터
│  ← 스와이프하여 다른 반려동물 →│
│                              │
├──────────────────────────────┤
│  산책 기록                    │
│  [캘린더] [리스트] [통계]      │  ← 뷰 전환 탭
│                              │
│        2026년 2월             │
│  일  월  화  수  목  금  토   │
│                         1    │
│   2   3  ④  ⑤  ⑥  7   8   │  ← 캘린더 뷰
│   9  ⑩  ⑪  12  13  14  15  │
│  16  17  18  19  20  21  22  │
│  23  24  25  26  27  28      │
│                              │
│  ④⑤⑥ 연속 3일! 🔥            │
│                              │
├──────────────────────────────┤
│  뱃지 컬렉션  12/47  [전체>]  │  ← 뱃지 섹션
│                              │
│  ── 진행 중 ──               │
│  ┌────┐ ┌────┐ ┌────┐      │
│  │🏃  │ │🔥  │ │🧭  │      │
│  │72% │ │57% │ │30% │      │  ← 가로 스크롤
│  │▓▓▓░│ │▓▓░░│ │▓░░░│      │
│  └────┘ └────┘ └────┘      │
│                              │
│  ── 최근 획득 ──             │
│  ┌────┐ ┌────┐ ┌────┐      │
│  │🐾✨│ │🏃✨│ │🔥✨│      │
│  │첫발 │ │5km │ │3일 │      │  ← 2x3 그리드
│  └────┘ └────┘ └────┘      │
│  ┌────┐ ┌────┐ ┌────┐      │
│  │⏱️✨│ │🌅✨│ │💪✨│      │
│  │1시간│ │얼리 │ │7일 │      │
│  └────┘ └────┘ └────┘      │
│                              │
│  [전체 뱃지 컬렉션 보기 →]    │
│                              │
├──────────────────────────────┤
│  [🏠] [👥] [🐾] [🏆] [👤]   │  ← 하단 탭 바
│   홈   소셜  산책  랭킹  MY   │
└──────────────────────────────┘
```

---

## 5. 뱃지 시스템 기술 명세

### 5.1 뱃지 데이터 모델

```sql
-- 뱃지 정의 테이블
badge_definitions (
  id UUID PRIMARY KEY,
  category TEXT NOT NULL,       -- distance, streak, exploration, time, special, season
  name TEXT NOT NULL,            -- "5km 클럽"
  description TEXT,              -- "누적 5킬로미터를 걸었어요"
  icon TEXT,                     -- 이모지 또는 아이콘 코드
  condition_type TEXT NOT NULL,  -- cumulative_distance, consecutive_days, unique_places, etc.
  condition_value NUMERIC,       -- 5000 (미터), 7 (일), 10 (곳)
  difficulty TEXT,               -- beginner, easy, normal, hard, very_hard, legendary, mythic
  season_start DATE,             -- 시즌 뱃지용 (NULL이면 상시)
  season_end DATE,               -- 시즌 뱃지용
  hint TEXT,                     -- 미발견 뱃지의 힌트 텍스트
  sort_order INT                 -- 카테고리 내 정렬 순서
)

-- 사용자별 뱃지 상태 테이블
user_badges (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES users(id),
  badge_id UUID REFERENCES badge_definitions(id),
  status TEXT NOT NULL DEFAULT 'locked',  -- locked, in_progress, earned
  progress_value NUMERIC DEFAULT 0,       -- 현재 진행 수치
  progress_percent NUMERIC DEFAULT 0,     -- 진행률 (%)
  earned_at TIMESTAMP,                     -- 획득 시각
  pet_id UUID REFERENCES pets(id),        -- 어떤 반려동물과 달성했는지
  UNIQUE(user_id, badge_id)
)
```

### 5.2 뱃지 진행률 업데이트 로직

```
산책 완료 이벤트 발생
  ↓
Supabase Edge Function 트리거
  ↓
각 카테고리별 진행률 계산:
  - 거리 뱃지: SUM(walks.distance_m) → 각 거리 뱃지의 조건과 비교
  - 연속 뱃지: 연속 산책일수 계산 → 각 연속 뱃지의 조건과 비교
  - 탐험 뱃지: COUNT(DISTINCT place_id) → 각 탐험 뱃지의 조건과 비교
  - 시간 뱃지: SUM(walks.duration_sec) → 각 시간 뱃지의 조건과 비교
  - 스페셜 뱃지: 개별 조건 체크 (시간, 날씨 등)
  - 시즌 뱃지: 기간 내 특수 조건 체크
  ↓
상태 업데이트:
  - locked → in_progress: 진행률 > 0%일 때
  - in_progress → earned: 진행률 = 100%일 때
  ↓
earned 상태 변경 시:
  - 푸시 알림 전송
  - 산책 완료 화면에 획득 애니메이션 표시
  - 소셜 피드에 자동 공유 (설정에 따라)
```

### 5.3 연속 뱃지 특수 로직

```
연속일수 계산:
  - 기준: 하루에 1회 이상 산책 (최소 500m)
  - 하루 기준: 오전 4시 ~ 다음날 오전 4시 (새벽 산책 고려)
  - 연속 끊김 시: 진행률 리셋 (0부터 다시 시작)
  - 연속 끊김 알림: "연속 기록이 끊어졌어요. 다시 시작해볼까요?"
  - 면제 시스템: 프리미엄 사용자는 월 1회 "휴식일" 사용 가능
    (연속 기록 유지)
```

---

## 6. 데이터 요구사항

| 데이터 | API/소스 | 갱신 주기 |
|--------|---------|----------|
| 반려동물 프로필 | Supabase (pets 테이블) | 사용자 수정 시 |
| 누적 통계 | Supabase (walks 집계) | 산책 완료 시 |
| 건강 기록 | Supabase (pet_health 테이블) | 사용자 입력 시 |
| 산책 캘린더 | Supabase (walks 테이블) | 산책 완료 시 |
| 산책 통계 | Supabase (walks 집계) | 산책 완료 시 |
| 뱃지 상태 | Supabase (user_badges 테이블) | 산책 완료 시 Edge Function |
| 설정 값 | AsyncStorage (로컬) + Supabase (백업) | 변경 즉시 |

---

*작성일: 2026-02-12*
*버전: 2.0 (뱃지 시스템 통합 -- 핵심 리디자인)*
