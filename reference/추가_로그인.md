# 로그인 화면 - 멍이랑 (withbowwow)

> 앱 최초 접속 또는 로그아웃 후 표시되는 소셜 로그인 화면.
> 간편 소셜 로그인으로 가입 장벽을 최소화하고, 회원가입 = 간편 로그인으로 자동 처리 (별도 가입 폼 없음).

---

## 1. 스크린 개요

### 1.1 목적

로그인 화면은 멍이랑 앱의 진입점이다. 사용자가 앱을 처음 실행하거나 로그아웃 후 재진입할 때 표시되며, 간편 소셜 로그인(카카오, 네이버, Apple, Google)을 통해 가입과 로그인을 하나의 동작으로 통합한다. 별도의 회원가입 폼(이름, 이메일, 비밀번호 입력 등)을 두지 않고, 소셜 로그인 버튼 한 번의 탭으로 신규 가입과 기존 로그인을 모두 처리하여 가입 전환율을 극대화한다. 이는 한국 모바일 앱 시장에서 카카오/네이버 소셜 로그인의 높은 보급률(합산 90%+)을 활용한 전략이다.

### 1.2 핵심 사용자 니즈

| 니즈 | 설명 | 우선순위 |
|------|------|---------|
| 빠른 로그인/가입 | "복잡한 폼 작성 없이 한 번의 탭으로 바로 시작하고 싶다" | ✅ 필수 |
| 기존 소셜 계정 활용 | "이미 사용 중인 카카오/네이버/Apple/Google 계정으로 가입하고 싶다" | ✅ 필수 |
| 신뢰감 확보 | "내 개인정보가 안전하게 처리된다는 걸 알고 싶다" | ✅ 필수 |
| 재로그인 편의 | "로그아웃 후에도 이전에 사용한 소셜 로그인 방식으로 빠르게 돌아오고 싶다" | ⭐ 선택 |

### 1.3 진입 경로

```
경로 1: 앱 최초 실행 (신규 사용자 - 온보딩 슬라이드 이후)
경로 2: 설정 > 로그아웃 후 재진입
경로 3: 앱 데이터 초기화 후 실행
경로 4: 세션 만료 시 자동 이동
```

---

## 2. 화면 구성

### 섹션 1: 메인 영역 (앱 브랜딩)

#### 콘텐츠 구성

- **앱 로고**: 발바닥 아이콘 + "멍이랑" 타이틀 (대형, 중앙 배치)
  - 발바닥 아이콘: 64x64px, Primary 컬러 (#10B981)
  - "멍이랑" 텍스트: 32pt Bold, Dark (#191919)
  - 로고와 텍스트 수직 정렬, 화면 상단 40% 영역에 배치
- **서브 카피**: "반려동물과 함께하는 즐거운 산책" (16pt Regular, Gray #6B7280)
  - 로고 하단 12px 간격

#### 이 콘텐츠가 있는 이유

> 로그인 화면의 상단 영역은 앱의 첫인상을 결정하는 브랜딩 공간이다.
>
> - **브랜드 인지(Brand Recognition)**: 발바닥 아이콘은 반려동물 앱이라는 정체성을 즉시 전달한다. 앱 아이콘과 동일한 심볼을 로그인 화면에 대형으로 표시하면, 앱 스토어에서 본 아이콘과의 일관성이 "올바른 앱을 열었다"는 확신을 준다.
> - **서브 카피의 역할**: "반려동물과 함께하는 즐거운 산책"은 앱의 핵심 가치를 한 줄로 요약한다. 이 서브 카피는 사용자가 로그인 버튼을 누르기 전에 "이 앱이 나에게 어떤 가치를 제공하는지"를 재확인시키는 마지막 동기부여 역할을 한다.
> - **여백의 활용**: 로고 영역에 충분한 여백을 두어 시각적 호흡(Visual Breathing Room)을 제공한다. 요소가 빽빽하게 배치된 화면은 사용자에게 부담감을 주지만, 넉넉한 여백은 "깔끔하고 신뢰할 수 있는 앱"이라는 인상을 형성한다.

---

### 섹션 2: 소셜 로그인 버튼 4종

#### 콘텐츠 구성

각 버튼은 가로 풀너비 (좌우 24px 패딩), 세로 52px, 라운드 radius 12px, 아이콘+텍스트 구성이다. 버튼 간 세로 간격 12px.

| 순서 | 로그인 방식 | 배경색 | 텍스트색 | 아이콘 | 비고 |
|------|------------|--------|---------|--------|------|
| 1 | 카카오톡으로 시작하기 | #FEE500 (노란색) | #191919 (검정) | 카카오 말풍선 로고 (좌측 16px) | 한국 사용자 1순위 |
| 2 | 네이버로 시작하기 | #03C75A (초록색) | #FFFFFF (흰색) | 네이버 N 로고 (좌측 16px) | 한국 사용자 2순위 |
| 3 | Apple로 시작하기 | #000000 (검정색) | #FFFFFF (흰색) | Apple 로고 (좌측 16px) | iOS 전용, Android에서 미표시 |
| 4 | Google로 시작하기 | #FFFFFF (흰색, 1px #DADCE0 테두리) | #191919 (검정) | Google G 로고 (좌측 16px) | 크로스 플랫폼 |

- **버튼 공통 스타일**:
  - 높이: 52px
  - 라운드: 12px border-radius
  - 텍스트: 16pt Medium, 중앙 정렬
  - 아이콘: 20x20px, 텍스트 좌측 8px 간격
  - 터치 영역: 최소 48px 높이 (접근성 기준)
  - 탭 피드백: 0.95 스케일 다운 + 밝기 -10% (150ms)

#### 이 콘텐츠가 있는 이유

> 소셜 로그인 버튼의 순서, 색상, 스타일은 각 플랫폼의 브랜드 가이드라인과 한국 시장 특성을 반영한 전략적 결정이다.
>
> - **카카오 최상단 배치**: 한국 모바일 앱에서 카카오 로그인은 약 70%의 가입 전환율을 보인다. 카카오톡이 한국 스마트폰 사용자의 96%에 설치되어 있으므로, 가장 친숙하고 접근성이 높은 로그인 방식을 최상단에 배치하여 "기본 선택지"로 제시한다. Fitts's Law에 따라 화면 중앙에 가까울수록 탭 정확도가 높으므로, 첫 번째 버튼의 위치가 가장 유리하다.
> - **Apple 로그인 의무**: Apple App Store 가이드라인 4.8에 따라, 소셜 로그인을 제공하는 앱은 반드시 "Apple로 로그인" 옵션을 함께 제공해야 한다. 이를 준수하되, Android 기기에서는 Apple 로그인 버튼을 표시하지 않아 불필요한 혼란을 방지한다.
> - **Google 로그인의 보완적 역할**: Google 계정은 Android 사용자에게 기본 계정이므로, Apple 로그인이 미표시되는 Android 환경에서 세 번째 선택지로 자연스럽게 올라온다. 흰색 배경 + 테두리 스타일은 Google 브랜드 가이드라인의 요구사항이다.
> - **"시작하기" 워딩의 의도**: "로그인" 대신 "시작하기"를 사용한 것은, 가입과 로그인의 구분을 없애기 위함이다. 사용자는 "가입인지 로그인인지" 고민할 필요 없이 단순히 "시작"만 하면 된다. 이는 가입 전환율을 높이는 인지 마찰(Cognitive Friction) 제거 전략이다.

---

### 섹션 3: 하단 약관 동의 안내

#### 콘텐츠 구성

- **약관 동의 텍스트**: "시작하면 이용약관 및 개인정보처리방침에 동의합니다" (12pt Regular, Gray #9CA3AF)
  - 화면 최하단, 로그인 버튼 그룹 하단 24px 간격
  - "이용약관" 텍스트: 밑줄 + 탭 가능 (웹뷰로 이용약관 페이지 이동)
  - "개인정보처리방침" 텍스트: 밑줄 + 탭 가능 (웹뷰로 개인정보처리방침 페이지 이동)
- **Safe Area 고려**: 하단 텍스트는 iOS Safe Area 및 Android 네비게이션 바 영역 위에 위치

#### 이 콘텐츠가 있는 이유

> 약관 동의 안내는 법적 의무사항이면서 동시에 가입 UX에 영향을 미치는 중요한 요소이다.
>
> - **묵시적 동의(Implied Consent) 패턴**: 별도의 체크박스를 두지 않고 "시작하면 동의합니다" 방식을 채택하여 가입 단계를 최소화한다. 이는 카카오톡, 인스타그램, 트위터 등 대부분의 글로벌 앱이 채택한 방식이다. 다만 한국 정보통신망법에 따라 개인정보처리방침 링크는 반드시 제공해야 한다.
> - **시각적 위계**: 약관 텍스트를 12pt Gray로 처리하여, 로그인 버튼보다 시각적 우선순위를 낮춘다. 약관 안내가 로그인 버튼보다 눈에 띄면 사용자가 "뭔가 동의해야 할 것이 있다"는 인식에 의해 이탈할 수 있다. 필요한 정보는 제공하되, 행동 흐름을 방해하지 않는 "존재하지만 방해하지 않는" 설계이다.
> - **법적 요구사항 충족**: 개인정보보호법 제15조(개인정보의 수집·이용) 및 정보통신망법 제22조(개인정보의 수집·이용 동의)에 따라, 서비스 이용 시 개인정보 수집에 대한 동의를 받아야 한다. 소셜 로그인의 경우 소셜 플랫폼에서 제공하는 정보(이메일, 프로필)의 수집 범위를 개인정보처리방침에 명시한다.

---

## 3. 로그인 플로우

### 3.1 전체 흐름

```
소셜 로그인 버튼 탭
  ↓
해당 소셜 서비스 OAuth 인증
  (WebView 또는 네이티브 SDK)
  ↓
인증 성공 → 서버에 토큰 전달
  ↓
┌─────────── 분기 ───────────┐
│                             │
│  신규 사용자                기존 사용자
│  (DB에 해당 소셜 ID 없음)   (DB에 해당 소셜 ID 존재)
│       ↓                         ↓
│  자동 회원가입 처리          세션 복원
│  - users 테이블 INSERT       - 토큰 갱신
│  - auth_provider 저장        - 마지막 로그인 시간 갱신
│  - user_code #nnnn 부여      ↓
│       ↓                    메인 화면(홈 탭)으로 이동
│  온보딩(펫 등록) 화면으로
│
└─────────────────────────────┘
```

### 3.2 단계별 상세

| 단계 | 동작 | 피드백 | 소요 시간 |
|------|------|--------|----------|
| 1 | 소셜 로그인 버튼 탭 | 버튼 비활성화 + 로딩 스피너 표시 | 즉시 |
| 2 | OAuth 인증 화면 표시 | WebView 또는 네이티브 소셜 앱 전환 | 0.5~2초 |
| 3 | 사용자 인증 완료 | WebView 닫힘 + 앱으로 복귀 | 사용자 의존 |
| 4-A | 신규: 자동 회원가입 | "회원가입 완료!" 토스트 | 1~2초 |
| 4-B | 기존: 세션 복원 | "환영합니다!" 토스트 | 0.5~1초 |
| 5-A | 신규: 온보딩(펫 등록) 이동 | 펫 등록 화면으로 슬라이드 전환 | 즉시 |
| 5-B | 기존: 홈 탭 이동 | 메인 화면으로 페이드 전환 | 즉시 |

### 3.3 고유 식별번호 (#nnnn) 부여

회원가입 시 모든 사용자에게 고유 식별번호 `#nnnn` (4자리 숫자)이 자동 부여된다. 이 번호는 반려동물 이름과 조합하여 "초코#1234"와 같은 고유 태그를 생성한다. 소셜 피드, 랭킹, 챌린지 등에서 사용자를 식별하는 데 사용되며, 실명이나 소셜 계정 ID를 노출하지 않아 프라이버시를 보호한다.

- **형식**: `#0001` ~ `#9999` (4자리 제로패딩)
- **충돌 방지**: 동일 반려동물 이름 내에서 고유. 다른 이름이면 같은 번호 가능 (초코#1234, 달이#1234는 공존 가능)
- **변경 불가**: 한 번 부여되면 변경 불가 (혼란 방지)

### 3.4 에러 처리

| 에러 상황 | 사용자 메시지 | 복구 방법 |
|----------|-------------|----------|
| 네트워크 오류 | "인터넷 연결을 확인해주세요" | 재시도 버튼 표시 |
| OAuth 인증 취소 | (무반응, 로그인 화면 유지) | 다시 버튼 탭 가능 |
| OAuth 인증 실패 | "로그인에 실패했어요. 다시 시도해주세요" | 재시도 안내 |
| 서버 오류 | "일시적인 오류가 발생했어요. 잠시 후 다시 시도해주세요" | 자동 재시도 (3회) + 수동 재시도 버튼 |
| 이미 다른 소셜로 가입 | "이 이메일은 카카오 계정으로 가입되어 있어요" | 기존 소셜 로그인 방식 안내 |

---

## 4. UX 설계 의도

### 4.1 정보 계층 구조

```
Level 1 (브랜딩): 앱 로고 + 서브 카피 — 앱 정체성 인지
Level 2 (행동): 소셜 로그인 버튼 4종 — 핵심 CTA
Level 3 (법적 안내): 약관 동의 텍스트 — 필수 법적 요소
```

로그인 화면은 앱에서 가장 단순한 화면이어야 한다. 사용자의 목표는 "빠르게 앱에 진입하는 것"이므로, 불필요한 요소를 최대한 배제하고 브랜딩 → 로그인 버튼 → 약관의 3단 구조로 최소화했다. 시선의 흐름은 자연스럽게 위에서 아래로 이동하며, 최종적으로 로그인 버튼에 집중된다.

### 4.2 인터랙션 패턴

| 인터랙션 | 동작 | 피드백 |
|---------|------|--------|
| 소셜 로그인 버튼 탭 | 버튼 터치 | 스케일 다운(0.95) + 밝기 감소 + 로딩 스피너 |
| 이용약관 링크 탭 | 텍스트 터치 | 웹뷰 모달로 이용약관 페이지 표시 |
| 개인정보처리방침 링크 탭 | 텍스트 터치 | 웹뷰 모달로 개인정보처리방침 페이지 표시 |
| OAuth 인증 완료 | 소셜 앱에서 승인 | 앱 복귀 + 로딩 오버레이 + 화면 전환 |
| 에러 발생 | 인증 실패 | 에러 토스트 (3초) + 버튼 재활성화 |

### 4.3 접근성 고려사항

- **VoiceOver/TalkBack**: 각 소셜 로그인 버튼에 `accessibilityLabel` 적용 (예: "카카오톡으로 시작하기, 버튼")
- **색상 대비**: 모든 버튼의 텍스트-배경 대비 4.5:1 이상 유지. Google 버튼(흰 배경)은 테두리로 영역 구분
- **터치 영역**: 버튼 높이 52px (최소 기준 48px 초과)
- **다크 모드**: 배경 #121212, 로고 텍스트 #E0E0E0, 카카오 버튼 색상 유지, Google 버튼 배경 #2D2D2D + 흰색 테두리
- **동적 폰트**: 큰 글씨 모드에서도 버튼 내 텍스트 잘림 없이 표시 (최대 20pt까지 대응)
- **스크린 리더 순서**: 로고 → 서브 카피 → 카카오 → 네이버 → Apple → Google → 약관 텍스트 순

---

## 5. 와이어프레임 (ASCII)

```
┌──────────────────────────────┐
│                              │
│                              │
│                              │
│          🐾                  │  ← 발바닥 아이콘 (64px, Primary)
│        멍이랑                │  ← 앱 이름 (32pt Bold)
│  반려동물과 함께하는          │  ← 서브 카피 (16pt, Gray)
│    즐거운 산책               │
│                              │
│                              │
│                              │
│  ┌────────────────────────┐  │
│  │ 💬 카카오톡으로 시작하기 │  │  ← #FEE500 배경
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │  N  네이버로 시작하기    │  │  ← #03C75A 배경
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │   Apple로 시작하기     │  │  ← #000000 배경 (iOS만)
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │  G  Google로 시작하기   │  │  ← #FFFFFF 배경 + 테두리
│  └────────────────────────┘  │
│                              │
│                              │
│  시작하면 이용약관 및         │  ← 12pt, Gray
│  개인정보처리방침에           │     밑줄 링크
│  동의합니다                  │
│                              │
└──────────────────────────────┘
```

### Android 버전 (Apple 로그인 미표시)

```
┌──────────────────────────────┐
│                              │
│                              │
│          🐾                  │
│        멍이랑                │
│  반려동물과 함께하는          │
│    즐거운 산책               │
│                              │
│                              │
│  ┌────────────────────────┐  │
│  │ 💬 카카오톡으로 시작하기 │  │  ← #FEE500
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │  N  네이버로 시작하기    │  │  ← #03C75A
│  └────────────────────────┘  │
│                              │
│  ┌────────────────────────┐  │
│  │  G  Google로 시작하기   │  │  ← #FFFFFF + 테두리
│  └────────────────────────┘  │
│                              │
│  시작하면 이용약관 및         │
│  개인정보처리방침에           │
│  동의합니다                  │
│                              │
└──────────────────────────────┘
```

---

## 6. 데이터 요구사항

### 6.1 인증 연동

| 데이터 | API/소스 | 설명 |
|--------|---------|------|
| 카카오 OAuth | FastAPI httpx + @react-native-kakao/core | 카카오 계정 인증, 프로필/이메일 수신 |
| 네이버 OAuth | FastAPI httpx + expo-auth-session | 네이버 계정 인증, 프로필/이메일 수신 |
| Apple OAuth | FastAPI httpx + expo-apple-authentication | Apple ID 인증 (iOS 전용) |
| Google OAuth | FastAPI httpx + expo-auth-session | Google 계정 인증 |

### 6.2 users 테이블 스키마 (로그인 관련 컬럼)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | UUID (PK) | 앱 자체 UUID (python-jose JWT 기반) |
| auth_provider | VARCHAR | 인증 제공자 ('kakao', 'naver', 'apple', 'google') |
| user_code | VARCHAR(5) | 고유 식별번호 '#nnnn' (예: #1234) |
| email | VARCHAR | 소셜 계정 이메일 (마스킹 저장) |
| created_at | TIMESTAMP | 가입 일시 |
| last_login_at | TIMESTAMP | 마지막 로그인 일시 |
| deleted_at | TIMESTAMP (nullable) | 탈퇴 일시 (soft delete, 30일 유예) |

### 6.3 인증 토큰 관리

```
소셜 로그인 성공
  ↓
FastAPI에서 python-jose로 JWT 토큰 발급
  - Access Token (1시간 유효)
  - Refresh Token (30일 유효, hashed_refresh_token으로 DB 저장)
  ↓
SecureStorage에 암호화 저장
  (expo-secure-store 활용)
  ↓
API 요청 시 Access Token 헤더 포함
  ↓
Access Token 만료 시 Refresh Token으로 자동 갱신
  ↓
Refresh Token 만료 시 → 로그인 화면으로 이동
```

---

## 7. 관련 문서

| 문서 | 설명 |
|------|------|
| [추가_온보딩.md](추가_온보딩.md) | 온보딩 스크린 (로그인 후 신규 사용자 → 펫 등록 흐름) |
| [추가_설정.md](추가_설정.md) | 설정 스크린 (로그아웃 기능, 계정 관리) |
| [탭1_홈.md](탭1_홈.md) | 홈 탭 (로그인 후 기존 사용자 랜딩) |
| [추가_알림.md](추가_알림.md) | 알림 스크린 (소셜 알림, 챌린지 초대 등) |

---

*작성일: 2026-02-19*
*버전: 1.0 (로그인 화면 신규 작성)*
